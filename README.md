## Conditional Forgetting Benchmark

Benchmarked four frontier LLMs (GPT‑4.1, GPT‑4o‑mini, Claude 3.5 Sonnet via OpenRouter, Mistral Large 2407) on a 60-item synthetic dataset that requires overriding entrenched chess, arithmetic, and procedural rules. Chain-of-thought prompting improves accuracy but none of the models achieve perfect compliance—chess variants remain the dominant failure mode.

### Key Findings
- GPT‑4.1 + CoT reached 96.7% accuracy yet still failed two straightforward pawn-rule reversals (binomial *p* < 2e‑15 vs perfection).
- CoT boosts accuracy by 8–12 percentage points across all models (McNemar *p* ≤ 0.046 for GPT‑4.1 & Mistral), but residual errors persist.
- Chess overrides account for 87% of all mistakes; arithmetic and protocol swaps are almost solved, revealing domain-specific brittleness.
- Token usage stayed under 9k prompt tokens per model/prompt pair (≈$1 total), making the benchmark lightweight to rerun.

### Reproducing the Experiments
```bash
uv venv
source .venv/bin/activate
uv pip sync  # or `uv pip install -r uv.lock` if needed
python scripts/build_dataset.py            # regenerate data/conditional_forgetting.jsonl
python scripts/run_experiments.py         # requires OPENAI_API_KEY and OPENROUTER_API_KEY
python scripts/analyze_results.py         # produces CSV tables and plots under results/
```
Outputs are organized by timestamp under `results/model_outputs/`. Set `EVAL_LIMIT=10` to smoke-test the pipeline before full runs.

### File Structure
- `data/conditional_forgetting.jsonl` – 60-scenario benchmark (regenerated by `scripts/build_dataset.py`)
- `scripts/run_experiments.py` – API harness for OpenAI + OpenRouter models
- `scripts/analyze_results.py` – Aggregations, statistical tests, and visualizations
- `results/model_outputs/` – Raw per-model JSONL logs
- `results/analysis/` – `summary*.csv`, `prompt_comparisons.csv`, `sample_failures.json`, `environment.json`
- `results/plots/` – Accuracy bar charts for run `20251106-142751`
- `resources.md`, `planning.md`, `REPORT.md` – methodology, plan, and full write-up

### More Information
See `REPORT.md` for the complete methodology, statistical analysis, error breakdowns, plots, and recommendations for future work.
